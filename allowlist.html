<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Allowlist | Authentic RP</title>
<link rel="icon" href="assets/logo.png">
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="layout">

<nav class="nav">
  <div class="nav-inner">
    <div class="nav-brand">
      <img src="assets/logo.png">
      <span>AUTHENTIC</span>
    </div>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="index.html#status">Server Status</a>
      <a href="allowlist.html" class="active">Allowlist</a>
      <a href="staff.html">Staff</a>

<a href="https://docs.google.com/document/d/1nRhUJcx4joCEx1ZyuRJ-Ml2s04JpWjF4CiT2tOSLjQM/edit?usp=sharing"
   target="_blank">Regler</a>

      <a href="https://discord.gg/authentic2026" target="_blank" class="btn-discord">Join Discord</a>
    </div>
  </div>
</nav>

<main class="content center-page">

<h1 class="page-title">Allowlist Ans√∏gning</h1>
<p class="page-sub">Besvar alle sp√∏rgsm√•l grundigt. Kvalitet v√¶gtes h√∏jt.</p>

<form class="allowlist-form">

<textarea required placeholder="Hvad betyder seri√∏s roleplay for dig, og hvorfor er det vigtigt?"></textarea>
<textarea required placeholder="Beskriv en god og realistisk RP-situation."></textarea>
<textarea required placeholder="Beskriv en d√•rlig RP-situation og hvorfor den er d√•rlig."></textarea>
<textarea required placeholder="Hvilken type karakter √∏nsker du at spille?"></textarea>
<textarea required placeholder="Hvordan adskiller du IC og OOC?"></textarea>
<textarea required placeholder="Hvordan h√•ndterer du konflikter i RP?"></textarea>
<textarea required placeholder="Hvordan reagerer du hvis staff stopper en RP-situation?"></textarea>
<textarea required placeholder="Har du erfaring med seri√∏s RP?"></textarea>
<textarea required placeholder="Hvad forventer du af Authentic RP?"></textarea>
<textarea required placeholder="Hvorfor Authentic RP?"></textarea>
<textarea required placeholder="Hvordan kan du bidrage positivt til communityet?"></textarea>
<textarea required placeholder="Er der andet staff b√∏r vide om dig?"></textarea>

<button type="submit" class="btn-primary">Send Allowlist Ans√∏gning</button>

</form>

</main>

<footer>
  <p>¬© Authentic RP</p>
</footer>

</div>

<!-- =========================
     ALT SCRIPT (√âN FIL)
     ========================= -->
<script>
const form = document.querySelector(".allowlist-form");

form.addEventListener("submit", async (e) => {
  e.preventDefault();

  // üî¥ INDS√ÜT DIN DISCORD WEBHOOK HER
  const WEBHOOK_URL = "https://discord.com/api/webhooks/1467947911878021214/6dNvDkEgEfvbmaEYo_ifUfOmjqBnso0M5mjOUAueVVaf3SClPcOxKs7Jv_eIQUbLWYdx";

  const questions = [
    "Seri√∏s roleplay ‚Äì betydning",
    "God RP-situation",
    "D√•rlig RP-situation",
    "Karakterbeskrivelse",
    "IC vs OOC",
    "Konflikth√•ndtering",
    "Reaktion p√• staff-indgreb",
    "RP-erfaring",
    "Forventninger til serveren",
    "Hvorfor Authentic RP",
    "Bidrag til communityet",
    "Andet staff b√∏r vide"
  ];

  const answers = [...form.querySelectorAll("textarea")].map(t => t.value.trim());

  let text = questions.map((q, i) =>
    `**${i + 1}. ${q}**\n${answers[i] || "‚Äî"}`
  ).join("\n\n");

  // Discord-sikker split
  const MAX = 3500;
  const parts = [];
  while (text.length > 0) {
    parts.push(text.slice(0, MAX));
    text = text.slice(MAX);
  }

  try {
    // F√∏rste besked MED knapper
    await fetch(WEBHOOK_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        content: "üì• **Ny Allowlist Ans√∏gning ‚Äì Authentic RP**",
        embeds: [{
          description: parts[0],
          color: 3447003
        }],
        components: [
          {
            type: 1,
            components: [
              {
                type: 2,
                label: "ACCEPTER",
                style: 3,
                custom_id: "allowlist_accept"
              },
              {
                type: 2,
                label: "AFVIS",
                style: 4,
                custom_id: "allowlist_deny"
              }
            ]
          }
        ]
      })
    });

    // Resten UDEN knapper (meget vigtigt)
    for (let i = 1; i < parts.length; i++) {
      await fetch(WEBHOOK_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          embeds: [{
            description: parts[i],
            color: 3447003
          }]
        })
      });
    }

    alert("‚úÖ Din allowlist-ans√∏gning er sendt. Tak!");
    form.reset();

  } catch (err) {
    console.error(err);
    alert("‚ùå Kunne ikke sende ans√∏gningen. Tjek webhook og hosting.");
  }
});
</script>

</body>
</html>
